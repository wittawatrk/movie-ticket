{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/wittawat/work/freelance/concert-tiket/consert-ticket/web/src/lib/theme.ts"],"sourcesContent":["// theme.ts\nimport { createTheme } from '@mui/material/styles'\n\nexport const theme = createTheme({\n  palette: {\n    primary: { main: '#1976d2' },\n    secondary: { main: '#009688' },\n    error: { main: '#e53935' },\n  },\n})\n"],"names":[],"mappings":";;;;AAAA,WAAW;AACX;;AAEO,MAAM,QAAQ,IAAA,mNAAW,EAAC;IAC/B,SAAS;QACP,SAAS;YAAE,MAAM;QAAU;QAC3B,WAAW;YAAE,MAAM;QAAU;QAC7B,OAAO;YAAE,MAAM;QAAU;IAC3B;AACF"}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///Users/wittawat/work/freelance/concert-tiket/consert-ticket/web/src/guards/AuthGuard.tsx"],"sourcesContent":["'use client'\n\nimport { useRouter } from 'next/navigation'\nimport { useEffect, useState } from 'react'\n\nexport function AuthGuard({ children }: { children: React.ReactNode }) {\n  const router = useRouter()\n  const [ready, setReady] = useState(false)\n\n  useEffect(() => {\n    const token = localStorage.getItem('token')\n    if (!token) {\n      router.replace('/login')\n    } else {\n      setReady(true)\n    }\n  }, [])\n\n  if (!ready) return null\n  return <>{children}</>\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKO,SAAS,UAAU,EAAE,QAAQ,EAAiC;IACnE,MAAM,SAAS,IAAA,wIAAS;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC;IAEnC,IAAA,gHAAS,EAAC;QACR,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,CAAC,OAAO;YACV,OAAO,OAAO,CAAC;QACjB,OAAO;YACL,SAAS;QACX;IACF,GAAG,EAAE;IAEL,IAAI,CAAC,OAAO,OAAO;IACnB,qBAAO;kBAAG;;AACZ"}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["file:///Users/wittawat/work/freelance/concert-tiket/consert-ticket/web/src/guards/RoleGuard.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\n\ntype Role = 'ADMIN' | 'USER'\n\nexport function RoleGuard({\n                            allow,\n                            children,\n                          }: {\n  allow: Role | Role[]\n  children: React.ReactNode\n}) {\n  const router = useRouter()\n  const [ok, setOk] = useState(false)\n\n  useEffect(() => {\n    const user = JSON.parse(localStorage.getItem('user') || '{}')\n    const roles = Array.isArray(allow) ? allow : [allow]\n\n    if (!roles.includes(user.role)) {\n      router.replace('/403')\n    } else {\n      setOk(true)\n    }\n  }, [])\n\n  if (!ok) return null\n  return <>{children}</>\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAOO,SAAS,UAAU,EACE,KAAK,EACL,QAAQ,EAInC;IACC,MAAM,SAAS,IAAA,wIAAS;IACxB,MAAM,CAAC,IAAI,MAAM,GAAG,IAAA,+GAAQ,EAAC;IAE7B,IAAA,gHAAS,EAAC;QACR,MAAM,OAAO,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,WAAW;QACxD,MAAM,QAAQ,MAAM,OAAO,CAAC,SAAS,QAAQ;YAAC;SAAM;QAEpD,IAAI,CAAC,MAAM,QAAQ,CAAC,KAAK,IAAI,GAAG;YAC9B,OAAO,OAAO,CAAC;QACjB,OAAO;YACL,MAAM;QACR;IACF,GAAG,EAAE;IAEL,IAAI,CAAC,IAAI,OAAO;IAChB,qBAAO;kBAAG;;AACZ"}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///Users/wittawat/work/freelance/concert-tiket/consert-ticket/web/src/guards/GuestGuard.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useRouter } from 'next/router';\n\nexport default function GuestGuard({ children }: { children: React.ReactNode }) {\n  const router = useRouter();\n  const [allow, setAllow] = useState(false);\n\n  useEffect(() => {\n    const token = localStorage.getItem('token');\nconsole.log(token);\n    if (token) {\n      const userRaw = localStorage.getItem('user');\n      const user = userRaw ? JSON.parse(userRaw) : null;\n\n      if (user?.role === 'ADMIN') {\n        router.replace('/admin');\n      } else {\n        router.replace('/dashboard');\n      }\n    } else {\n      console.error('Not logged in.');\n      setAllow(true); // อนุญาตให้เห็นหน้า login\n    }\n  }, [router]);\n\n  if (!allow) return null; // หรือ <Loading />\n\n  return <>{children}</>;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS,WAAW,EAAE,QAAQ,EAAiC;IAC5E,MAAM,SAAS,IAAA,oIAAS;IACxB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC;IAEnC,IAAA,gHAAS,EAAC;QACR,MAAM,QAAQ,aAAa,OAAO,CAAC;QACvC,QAAQ,GAAG,CAAC;QACR,IAAI,OAAO;YACT,MAAM,UAAU,aAAa,OAAO,CAAC;YACrC,MAAM,OAAO,UAAU,KAAK,KAAK,CAAC,WAAW;YAE7C,IAAI,MAAM,SAAS,SAAS;gBAC1B,OAAO,OAAO,CAAC;YACjB,OAAO;gBACL,OAAO,OAAO,CAAC;YACjB;QACF,OAAO;YACL,QAAQ,KAAK,CAAC;YACd,SAAS,OAAO,0BAA0B;QAC5C;IACF,GAAG;QAAC;KAAO;IAEX,IAAI,CAAC,OAAO,OAAO,MAAM,mBAAmB;IAE5C,qBAAO;kBAAG;;AACZ"}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///Users/wittawat/work/freelance/concert-tiket/consert-ticket/web/src/components/layout/sidebar.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport Link from 'next/link';\nimport MenuIcon from '@mui/icons-material/Menu';\nimport { Box, List, ListItemButton, ListItemText, Drawer, IconButton } from '@mui/material';\n\nexport default function Sidebar() {\n  const [open, setOpen] = useState(false);\n\n  const MenuContent = () => (\n    <Box className=\"w-[240px] p-4\">\n      <h2 className=\"font-bold text-lg mb-4\">Admin</h2>\n\n      <List>\n        <ListItemButton component={Link} href=\"/admin\">\n          <ListItemText primary=\"Home\" />\n        </ListItemButton>\n\n        <ListItemButton component={Link} href=\"/admin/history\">\n          <ListItemText primary=\"History\" />\n        </ListItemButton>\n      </List>\n    </Box>\n  );\n\n  return (\n    <>\n      {/* Mobile Hamburger */}\n      <div className=\"md:hidden fixed top-2 left-2 z-50\">\n        <IconButton onClick={() => setOpen(true)} size=\"large\">\n          <MenuIcon />\n        </IconButton>\n      </div>\n\n      {/* Desktop Sidebar */}\n      <aside className=\"hidden  md:block md:flex w-64 bg-white border-r border-[#E7E7E7] shadow-md h-screen fixed left-0 top-0\">\n        <MenuContent />\n      </aside>\n\n      {/* Mobile Drawer */}\n      <Drawer\n        open={open}\n        onClose={() => setOpen(false)}\n        ModalProps={{ keepMounted: true }}\n      >\n        <MenuContent />\n      </Drawer>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+GAAQ,EAAC;IAEjC,MAAM,cAAc,kBAClB,qKAAC,wLAAG;YAAC,WAAU;;8BACb,qKAAC;oBAAG,WAAU;8BAAyB;;;;;;8BAEvC,qKAAC,4LAAI;;sCACH,qKAAC,oOAAc;4BAAC,WAAW,gIAAI;4BAAE,MAAK;sCACpC,cAAA,qKAAC,4NAAY;gCAAC,SAAQ;;;;;;;;;;;sCAGxB,qKAAC,oOAAc;4BAAC,WAAW,gIAAI;4BAAE,MAAK;sCACpC,cAAA,qKAAC,4NAAY;gCAAC,SAAQ;;;;;;;;;;;;;;;;;;;;;;;IAM9B,qBACE;;0BAEE,qKAAC;gBAAI,WAAU;0BACb,cAAA,qKAAC,oNAAU;oBAAC,SAAS,IAAM,QAAQ;oBAAO,MAAK;8BAC7C,cAAA,qKAAC,6JAAQ;;;;;;;;;;;;;;;0BAKb,qKAAC;gBAAM,WAAU;0BACf,cAAA,qKAAC;;;;;;;;;;0BAIH,qKAAC,oMAAM;gBACL,MAAM;gBACN,SAAS,IAAM,QAAQ;gBACvB,YAAY;oBAAE,aAAa;gBAAK;0BAEhC,cAAA,qKAAC;;;;;;;;;;;;AAIT"}},
    {"offset": {"line": 334, "column": 0}, "map": {"version":3,"sources":["file:///Users/wittawat/work/freelance/concert-tiket/consert-ticket/web/src/components/layout/layout.tsx"],"sourcesContent":["import { AuthGuard } from '../../guards/AuthGuard';\nimport { RoleGuard } from '../../guards/RoleGuard';\nimport GuestGuard from '../../guards/GuestGuard';\nimport Sidebar from './sidebar';\n\nexport default function GlobalLayout({\n  children,\n  requireAdmin = false,\n  guestOnly = false,\n}: {\n  children: React.ReactNode;\n  requireAdmin?: boolean;\n  guestOnly?: boolean;\n}) {\n  const content = (\n    <div className=\"flex min-h-screen bg-gray-100\">\n      {!guestOnly && <Sidebar />}\n      <main\n        className={`flex-1 p-4 md:p-6 ${!guestOnly ? 'md:ml-[240px]' : ''}`}\n      >\n        {children}\n      </main>\n    </div>\n  );\n\n  if (guestOnly) {\n    return <GuestGuard>{children}</GuestGuard>;\n  }\n\n  if (requireAdmin) {\n    return (\n      <AuthGuard>\n        <RoleGuard allow=\"ADMIN\">{content}</RoleGuard>\n      </AuthGuard>\n    );\n  }\n\n  return <AuthGuard>{content}</AuthGuard>;\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;AAEe,SAAS,aAAa,EACnC,QAAQ,EACR,eAAe,KAAK,EACpB,YAAY,KAAK,EAKlB;IACC,MAAM,wBACJ,qKAAC;QAAI,WAAU;;YACZ,CAAC,2BAAa,qKAAC,2IAAO;;;;;0BACvB,qKAAC;gBACC,WAAW,CAAC,kBAAkB,EAAE,CAAC,YAAY,kBAAkB,IAAI;0BAElE;;;;;;;;;;;;IAKP,IAAI,WAAW;QACb,qBAAO,qKAAC,gIAAU;sBAAE;;;;;;IACtB;IAEA,IAAI,cAAc;QAChB,qBACE,qKAAC,iIAAS;sBACR,cAAA,qKAAC,iIAAS;gBAAC,OAAM;0BAAS;;;;;;;;;;;IAGhC;IAEA,qBAAO,qKAAC,iIAAS;kBAAE;;;;;;AACrB"}},
    {"offset": {"line": 408, "column": 0}, "map": {"version":3,"sources":["file:///Users/wittawat/work/freelance/concert-tiket/consert-ticket/web/src/pages/_app.tsx"],"sourcesContent":["import { ThemeProvider } from '@mui/material/styles';\nimport { theme } from '@/lib/theme';\nimport GlobalLayout from '../components/layout/layout';\nimport { NextPageWithRole } from '../types/next-page';\nimport type { AppProps } from 'next/app';\nimport '@/styles/globals.css'\nimport { SnackbarProvider } from '../components/snackbar';\n\n\ntype AppPropsWithRole = AppProps & {\n  Component: NextPageWithRole\n}\nexport default function App({ Component, pageProps }: AppPropsWithRole) {\n  const requireAdmin = Component.requireAdmin || false;\n  return (\n    <ThemeProvider theme={theme}>\n      {/*<SnackbarProvider>*/}\n      <GlobalLayout requireAdmin={requireAdmin} guestOnly={Component.guestOnly}>\n        <Component {...pageProps} />\n      </GlobalLayout>\n      {/*</SnackbarProvider>*/}\n    </ThemeProvider>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;;AAUe,SAAS,IAAI,EAAE,SAAS,EAAE,SAAS,EAAoB;IACpE,MAAM,eAAe,UAAU,YAAY,IAAI;IAC/C,qBACE,qKAAC,yNAAa;QAAC,OAAO,qHAAK;kBAEzB,cAAA,qKAAC,0IAAY;YAAC,cAAc;YAAc,WAAW,UAAU,SAAS;sBACtE,cAAA,qKAAC;gBAAW,GAAG,SAAS;;;;;;;;;;;;;;;;AAKhC"}}]
}